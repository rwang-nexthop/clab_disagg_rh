name: disagg-clos

mgmt:
  network: disagg-clos-mgmt
  ipv4-subnet: 172.50.50.0/24

topology:
  kinds:
    sonic-vm:
      image: container-registry.sw.internal.nexthop.ai/clab-sonic:10368

  nodes:
    # Tier 0: Root nodes
    RWA-1:
      kind: sonic-vm
      startup-config: ../configs/RWA-1/config_db.json

    RWA-2:
      kind: sonic-vm
      startup-config: ../configs/RWA-2/config_db.json

    # Tier 1: Spine nodes (Clos with Tier 0)
    URH-1-TH5:
      kind: sonic-vm
      startup-config: ../configs/URH-1-TH5/config_db.json

    URH-2-TH5:
      kind: sonic-vm
      startup-config: ../configs/URH-2-TH5/config_db.json

    # Tier 2: Leaf nodes (Clos with Tier 1)
    LRH-1-Q3D:
      kind: sonic-vm
      startup-config: ../configs/LRH-1-Q3D/config_db.json

    LRH-2-Q3D:
      kind: sonic-vm
      startup-config: ../configs/LRH-2-Q3D/config_db.json

    # Tier 3: Access nodes
    UT2-1-Q3D:
      kind: sonic-vm
      startup-config: ../configs/UT2-1-Q3D/config_db.json

    UT2-2-Q3D:
      kind: sonic-vm
      startup-config: ../configs/UT2-2-Q3D/config_db.json

  links:
    # Tier 0 to Tier 1 (Root to Spine Clos)
    - endpoints: [ RWA-1:eth1, URH-1-TH5:eth1 ]
    - endpoints: [ RWA-1:eth2, URH-2-TH5:eth1 ]
    - endpoints: [ RWA-2:eth1, URH-1-TH5:eth2 ]
    - endpoints: [ RWA-2:eth2, URH-2-TH5:eth2 ]

    # Tier 1 to Tier 2 (Spine to Leaf Clos)
    - endpoints: [ URH-1-TH5:eth3, LRH-1-Q3D:eth1 ]
    - endpoints: [ URH-1-TH5:eth4, LRH-2-Q3D:eth1 ]
    - endpoints: [ URH-2-TH5:eth3, LRH-1-Q3D:eth2 ]
    - endpoints: [ URH-2-TH5:eth4, LRH-2-Q3D:eth2 ]

    # Tier 2 to Tier 3 (Leaf to Access)
    - endpoints: [ LRH-1-Q3D:eth3, UT2-1-Q3D:eth1 ]
    - endpoints: [ LRH-2-Q3D:eth3, UT2-2-Q3D:eth1 ]

